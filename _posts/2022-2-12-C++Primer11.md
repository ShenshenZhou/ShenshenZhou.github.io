---

title: C++Primer5 第11章 关联容器
date: 2022-2-12 23:17:16 +0800
tags: [笔记,C++Primer5,C++]
categories: [笔记,C++Primer5]

---

**说明：**关联容器时按照关键字来保存和访问的。本章主要介绍STL库关联容器。

标准库提供八个关联容器，它们的不同体现在三个维度上：

* set（只保存关键字）或者map（保存键值对）。
* 关键字是否可重复，即`multi`。
* 元素是否有序，即`unordered`。

```c++
map					// 保存键值对
set					// 保存关键字
multimap			// 关键字可重复的map
multiset			// 关键字可重复的set
unordered_map   	// 无序map
unordered_set		// 无序set
unordered_multimap	// 无序 关键字可重复map
unordered_multiset	// 无序 关键字可重复set
```

#### 使用关联容器

`map`即为关联数组，和普通数组不同的地方在于其下标不必是整数，我们通过一个关键字而不是位置来查找值。

`set`是关键字的简单集合，当判断一个值是否存在时，最有用。

#### 关联容器概述

1、关联容器不支持顺序容器的位置相关的操作，如push_back等。关联容器的迭代器都是双向的。

> 由关键字存储，这些操作无意义。

2、map和set的关键字必须唯一，如果有相同的，会覆盖，multi允许重复关键字。

3、对于有序容器，关键字类型必须定义元素比较的方法。默认情况下，使用关键字类型的<运算符来比较两个关键字。

4、为了使用自己定义的类型，需要提供比较操作的类型：应该是一种函数指针类型。

```c++
bool cmp(const Sales_data& lhs, const Sales_data& rhs){
	return lhs.isbn() < rhs.isbn();
}
// 使用cmp操作类型对关联容器的元素进行排序
multiset<Sales_data, decltype(cmp)*> bookstore(cmp);
```

5、`pair`类型的数据成员是public的，分别为`first second`，通过成员访问符号来访问它们。pair的默认构造函数对数据成员进行值初始化。

#### 关联容器操作

##### 关联容器迭代器

1、我们不能改变一个元素的关键字，因此关联容器的关键字是const的。

2、当解引用一个关联容器迭代器时，我们得到一个类型为容器的value_type的值的引用。对于map，该类型为pair类型，first保存const关键字，second保存值。对于set，该类型和关键字类型一致。

```c++
auto map_iter = wordCount.begin();
cout << map_iter->first;
cout << map_iter->second;
map_iter->fitst = "new key";  // 错误 关键字为const
++map_iter->second;  // 正确 可以通过迭代器改变元素
```

3、遍历关联容器：map和set类型支持begin和end操作，因此和其他容器一样，可以通过这些函数获得迭代器，然后用迭代器遍历关联容器。

4、我们通常不对关联容器使用泛型算法。一般的，使用关联容器定义的成员函数比使用泛型算法快的多，比如`.count()`和`.find()`成员函数。

##### 添加元素



