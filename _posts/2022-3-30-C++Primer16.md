---

title: C++Primer5 第16章 模板
date: 2022-3-30 21:23:53+0800
tags: [笔记,C++Primer5,C++]
categories: [笔记,C++]

---

### 函数模板

```c++
template <typename T>
int compare(const T &v1, const T &v2) {
	if (v1 < v2) return -1;
    if (v2 < v1) return 1;
    return 0;
}
compate(1, 0);  // 实例化
```

模板定义时，模板参数列表不能为空。

### 模板编译

当编译器遇到一个模板定义时，它并不生成代码。只有我们实例化出模板的一个特定版本时，编译器才会生成代码。

> 通常我们将函数声明和类定义放在头文件中，而普通函数和类的成员函数的定义放在源文件中。但是函数模板和类模板的定义通常放在头文件中，这是因为为了生成一个实例化版本，编译器需要掌握函数模板和类成员模板的定义。

### 大多数模板编译错误在实例化期间报告

通常，编译器会在三个阶段报告错误：

* 第一个阶段是编译模板本身时，检查语法错误
* 第二个阶段是编译器遇到模板使用时，检查参数错误
* 第三个阶段是模板实例化时，只有这个阶段才会发现类型相关的错误，依赖于编译器如何管理实例化，这类错误可能在链接时才报告

### 类模板

与函数模板不同的是，编译器不能为类模板推断模板参数类型，需要显式指定。

定义在类模板之外的成员函数必须以关键字template开始，后接模板参数。

















